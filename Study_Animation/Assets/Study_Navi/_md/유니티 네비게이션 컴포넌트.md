# 유니티 네비게이션 시스템의 주요 컴포넌트

## NavMesh

### 역할
- 씬(Scene) 내에서 **이동 가능한 영역을 정의**하는 데이터.
- Bake(구워내기) 과정을 통해 생성되며, 에이전트는 이 NavMesh를 기반으로 경로를 찾음.

### 설정 방법
1. 이동 가능한 공간을 설정할 GameObject 선택 (예: Terrain, Plane 등)
2. Inspector → Static → Navigation Static 체크
3. Window → AI → Navigation → Bake 탭
4. Bake 버튼 클릭

### 주요 Bake 옵션

| 설정 항목 | 설명 |
|-----------|------|
| Agent Radius | 캐릭터의 반지름. 너무 작으면 벽 가까이 붙고, 너무 크면 통로를 지나지 못함. |
| Agent Height | 캐릭터 키. 천장이 낮은 공간 통과 여부 결정. |
| Max Slope | 캐릭터가 오를 수 있는 최대 경사도. |
| Step Height | 캐릭터가 넘을 수 있는 계단 높이. |

### 참고 사항
- NavMesh는 **Bake된 정적 정보**이므로, 동적 환경 변화에는 반응하지 않음.
- NavMesh Modifier, NavMesh Modifier Volume 등을 통해 구역마다 속성 다르게 설정 가능.

---

## NavMeshAgent

### 역할
- NavMesh 위에서 이동 가능한 AI 캐릭터에 붙는 컴포넌트.
- 목적지 설정 후 내부적으로 경로 탐색 → 이동 처리까지 자동 수행.

### 주요 속성 (Inspector)

| 속성 | 설명 |
|------|------|
| Speed | 이동 속도 |
| Acceleration | 가속도 |
| Angular Speed | 회전 속도 |
| Stopping Distance | 목적지 도착 전에 멈추는 거리 |
| Auto Braking | 목적지에 가까워지면 속도를 줄일지 여부 |
| Update Position / Rotation | Transform 위치와 회전 자동 업데이트 여부 |

### 주요 메서드 (C# API)

```csharp
agent.SetDestination(Vector3 targetPosition); // 목적지 설정
agent.pathStatus             // PathComplete, PathPartial, PathInvalid
agent.remainingDistance      // 남은 거리
agent.velocity               // 현재 속도 벡터
agent.desiredVelocity        // 목표 속도 벡터
agent.isStopped = true;      // 정지
agent.ResetPath();           // 경로 초기화
agent.isOnNavMesh            // NavMesh에 올라가 있는지 여부
agent.hasPath                // 경로가 존재하는지 여부
```
---

## NavMeshObstacle 

### 역할
- NavMeshObstacle은 NavMeshAgent가 피해야 하는 **장애물 역할**을 함.
- 정적인 오브젝트 또는 움직이는 장애물에 붙여서 사용 가능.
- Carve 기능을 통해 **NavMesh에서 해당 영역을 실시간으로 제거**할 수 있음.
- 장애물이 NavMesh를 실시간으로 수정하므로 **동적 환경을 구성**할 때 필수적임.

---

### 주요 속성

| 속성 이름 | 설명 |
|-----------|------|
| Shape | 장애물의 형태 (Box 또는 Capsule) |
| Center / Size | 충돌 영역의 위치와 크기 설정 |
| Carve | NavMesh에서 해당 오브젝트가 차지하는 영역을 잘라냄 |
| Carving Move Threshold | 장애물이 일정 거리 이상 이동해야만 NavMesh를 다시 잘라냄 |
| Carving Time To Stationary | 장애물이 멈춘 후 NavMesh에서 Carve가 적용되기까지 대기 시간 |
| Carve Only Stationary | 멈췄을 때만 Carve 수행 여부 |

---

### 실전 활용 팁

- 정적인 벽, 장애물에는 Carve를 활성화하지 않아도 됨 (기본 회피만 사용).
- 움직이는 큐브, 문, 차량 등에 사용 시 Carve 활성화 추천.
- ⚠️ 너무 많은 Obstacle이 Carve를 사용할 경우 성능 저하 발생 가능.
- 자주 움직이는 물체에는 Carve 비활성화하거나 Carve Only Stationary 설정 고려.

---